<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="css/style.css" />
    <script src="js/vendor/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?v=3&sensor=true">
    </script>
    <script type="text/javascript">
      var google_map = {
        canvas: null,
        map: null,
        geocoder: new google.maps.Geocoder(),
        options: {
          center: new google.maps.LatLng(35.681382,139.766084),
          zoom: 16,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        },
        initialize: function() {
          var canvas = this.canvas,
              options = this.options,
              map = new google.maps.Map(canvas, options);

          this.map = map;
        },
        geocode: function (address) {
          var geocoder = this.geocoder,
              that = this;
          geocoder.geocode({"address": address}, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
              var latlng = results[0].geometry.location;
              that.map.setCenter(latlng);
            } else {
              alert("Geocode was not successful for the following reason: " + status);
            }
          });
        },
        reverse_geocode: function () {
        },
        create: function (elem) {
          this.canvas = elem;
          this.initialize();
          return this;
        }
      };

      $(function() {
        var elem_map_canvas = $("#map_canvas")[0],
            map_controller = google_map.create(elem_map_canvas);
        $("#geocode").click(function () {
          var address = $("#address").val();
          map_controller.geocode(address);
        });
      });
    </script>
  </head>
  <body>
    <div id="contents">
      <div id="map_canvas" style="width:70%; height:100%; float: left;"></div>
      <div id="sidebar" style="width:30%; height:100%; float: right; background-color: lightgray;">
        <p>
          <input id="address" type="text"/>
          <input id="geocode" type="button" value="Geocode" />
        </p>
      </div>
    </div>
  </body>
</html>